{"version":3,"sources":["app.js","environment.js","main.js","api/api.js","api/posts.js","home/home.js","resources/index.js","posts/home.js","posts/list.js","resources/elements/pagination.js","/Users/hadrien/Documents/dev/aurelia-io.fr/blog/content/themes/ghost-aurelia/src/app.html","/Users/hadrien/Documents/dev/aurelia-io.fr/blog/content/themes/ghost-aurelia/src/home/home.html","/Users/hadrien/Documents/dev/aurelia-io.fr/blog/content/themes/ghost-aurelia/src/posts/list.html","/Users/hadrien/Documents/dev/aurelia-io.fr/blog/content/themes/ghost-aurelia/src/resources/elements/pagination.html","resources/elements/pagination.scss"],"names":["App","message","configureRouter","config","router","title","options","pushState","map","route","name","moduleId","handleUnknownRoutes","redirect","debug","testing","apiHost","clientId","clientSecret","configure","Promise","warnings","wForgottenReturn","aurelia","use","standardConfiguration","feature","developmentLogging","plugin","start","then","setRoot","ghost","window","Api","client","get","path","fetch","url","api","response","json","data","Posts","getBySlug","slug","httpClient","environment","Home","posts","activate","console","log","List","total","perPage","current","postsService","routeParams","page","loadPosts","limit","results","meta","pagination","navigate","navigateTo","navigateToRoute","MAX_PAGES","Pagination","loading","e","stopPropagation","res","finally","lastPage","pages","range","Math","floor","end","min","max","i","push","ceil"],"mappings":"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","file":"app-bundle.js","sourcesContent":["export class App {\n  constructor() {\n    this.message = 'Hello World!';\n  }\n\n  configureRouter(config, router) {\n    config.title = 'Aurelia-io.fr';\n    config.options.pushState = true;\n    config.map([{\n      route: '/',\n      name: 'home',\n      moduleId: './posts/list'\n    }, {\n      route: '/page/:page',\n      name: 'posts',\n      moduleId: './posts/list'\n    }, {\n      route: '/tag/:tag',\n      name: 'tag',\n      moduleId: './tags/tag'\n    }, {\n      route: '/:slug',\n      name: 'post',\n      moduleId: './posts/list'\n    }]);\n\n    router.handleUnknownRoutes({\n      redirect: '/'\n    });\n\n    this.router = router;\n  }\n}\n","export default {\n  debug: true,\n  testing: true,\n  apiHost: '/ghost/api/v0.1/',\n  clientId: 'ghost-frontend',\n  clientSecret: 'b65fd1919bd1'\n};\n","import 'regenerator-runtime/runtime';\nimport environment from './environment';\n\n//Configure Bluebird Promises.\n//Note: You may want to use environment-specific configuration.\nPromise.config({\n  warnings: {\n    wForgottenReturn: false\n  }\n});\n\nexport function configure(aurelia) {\n  aurelia.use\n    .standardConfiguration()\n    .feature('resources');\n\n  if (environment.debug) {\n    aurelia.use.developmentLogging();\n  }\n\n  if (environment.testing) {\n    aurelia.use.plugin('aurelia-testing');\n  }\n\n  aurelia.start().then(() => aurelia.setRoot());\n}\n","import {inject} from 'aurelia-framework';\nimport {HttpClient} from 'aurelia-fetch-client';\n\nconst ghost = window.ghost;\n\n@inject(HttpClient, ghost)\nexport class Api {\n  constructor(client, ghost) {\n    this.client = client;\n    this.ghost = ghost;\n  }\n\n  async get(path, options/*{ include, limit, page, order, fields, filter, resource }*/)Â {\n    const response = await this.client.fetch(this.ghost.url.api(path, options));\n    const data = await response.json();\n    return data;\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Api} from './api';\n\n@inject(Api)\nexport class Posts {\n  constructor(api) {\n    this.api = api;\n  }\n\n  get(options) {\n    return this.api.get('posts', options);\n  }\n\n  getBySlug(slug) {\n    return this.httpClient.get(`${environment}posts/?slug=${slug}`);\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Posts} from '../api/posts';\n\n@inject(Posts)\nexport class Home {\n  constructor(posts) {\n    this.posts = posts;\n  }\n\n  async activate() {\n    this.posts = await this.posts.get();\n    console.log(this.posts);\n  }\n}\n","export function configure(config) {\n  //config.globalResources([]);\n}\n","import {inject} from 'aurelia-framework';\nimport {Posts} from '../api/posts';\n\n@inject(Posts)\nexport class Home {\n  constructor(posts) {\n    this.posts = posts;\n  }\n\n  async activate() {\n    this.posts = await this.posts.get();\n    console.log(this.posts);\n  }\n}\n","import {inject} from 'aurelia-framework';\nimport {Router} from 'aurelia-router';\nimport {Posts} from '../api/posts';\n\n@inject(Router, Posts)\nexport class List {\n  posts = [];\n  total = 0;\n  perPage = 0;\n  current = 1;\n\n  constructor(router, posts) {\n    this.router = router;\n    this.postsService = posts;\n  }\n\n  async activate(routeParams = {}) {\n    this.current = +routeParams.page || 1;\n    return this.loadPosts();\n  }\n\n  async loadPosts() {\n    const results = await this.postsService.get({ page: this.current, limit: 5 });\n    this.posts = results.posts;\n    this.total = +results.meta.pagination.total;\n    this.perPage = +results.meta.pagination.limit;\n  }\n\n  navigate({ navigateTo }) {\n    if (navigateTo > 1) {\n      this.router.navigateToRoute('posts', { page: navigateTo });\n    } else {\n      this.router.navigateToRoute('home');\n    }\n  }\n}\n","import {bindable, computedFrom} from 'aurelia-framework';\n\nconst MAX_PAGES = 9;\n\n/**\n * @exemple\n * <pagination\n *   total.bind=\"total\"\n *   per-page.bind=\"perPage\"\n *   current.bind=\"current\"\n *   navigate.call=\"paginate($event)\"></pagination>\n */\nexport class Pagination {\n  @bindable total = 0;\n  @bindable perPage = 0;\n  @bindable current = 1;\n  @bindable navigate = () => {};\n  loading = null;\n\n  @computedFrom('total', 'perPage', 'current')\n  get pages() {\n    if (!this.perPage) {\n      return [];\n    }\n    const total = this.lastPage - 1;\n    const pages = [];\n    const current = +this.current;\n\n    let range = Math.floor(MAX_PAGES / 2);\n    if (range % 2 === 1) {\n      range--;\n    }\n\n    let end = Math.min(Math.max(current + range, MAX_PAGES), total + 1);\n    let start = Math.min(Math.max(current - range, 1), Math.max(end - MAX_PAGES + 1, 1));\n\n    for (let i = start; i <= end; i++) {\n      pages.push(i);\n    }\n\n    return pages;\n  }\n\n  @computedFrom('total', 'perPage')\n  get lastPage() {\n    return Math.ceil(+this.total / +this.perPage);\n  }\n\n  navigateTo(e, page) {\n    e.stopPropagation();\n    if (typeof this.navigate === 'function') {\n      const res = this.navigate({\n        total: this.total,\n        perPage: this.perPage,\n        current: this.current,\n        navigateTo: page\n      });\n      if (res instanceof Promise) {\n        this.loading = page;\n        res\n        .finally(() => this.loading = null);\n      }\n    }\n  }\n}\n",null,null,null,null,""],"sourceRoot":"../src"}